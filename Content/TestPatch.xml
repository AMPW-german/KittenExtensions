<Patch>
  <With Path="Mod[@Id='KittenExtensions']">
    <Update Path="Assets/@Path">NewPath</Update>
    <Update Pos="Append">
      <Test abc="123" def="456">
        <Init />
      </Test>
    </Update>
    <With Path="Test">
      <Update Pos="Append">
        <Appended />
      </Update>
      <Update Pos="Prepend">
        <Prepended />
      </Update>
      <Update Pos="After">
        <After />
      </Update>
      <Update Pos="Before">
        <Before />
      </Update>
      <Update Path="@*" Pos="Append">X</Update>
    </With>
    <Update Pos="Append">
      <MergeTest>
        <X Id="123" />
        <X Id="345" Id2="123" />
      </MergeTest>
    </Update>
    <Update Path="MergeTest" Pos="Merge">
      <MergeTest _MergePos="Prepend">
        <X Id="123">TEXT</X>
        <X Id="123" Id2="123" _MergeId="Id2">TEXT2</X>
      </MergeTest>
    </Update>
    <Copy Path="Assets" Pos="Append" From="/Root/Mod[@Id='Core']/Assets/GaugeCanvas[@Id='RendezvousControl']" />
    <Update Path="Assets/GaugeCanvas[@Id='RendezvousControl']">
      <GaugeCanvas Id="RendezvousControl2">
        <DisplayName Value="COPIED" />
        <OffsetUv X="-0.25" />
      </GaugeCanvas>
    </Update>
    <If Path="Assets/GaugeCanvas/DisplayName/@Value='COPIED'">
      <Any>
        <Update Pos="Append">
          <Result>SUCCESS</Result>
        </Update>
      </Any>
      <None>
        <Update Pos="Append">
          <Result>FAIL</Result>
        </Update>
      </None>
    </If>
  </With>
  <!-- run for each PlanetaryBody and AtmosphericBody anywhere in the GameData document -->
  <With Path="//PlanetaryBody | //AtmosphericBody">
    <If Path="sum(Color/@*) > 1.5">
      <Any>
        <!-- if R+G+B of color is >1.5 make each RGB val brighter -->
        <With Path="Color/@*">
          <Copy From="1-(1-.)*0.5" />
        </With>
      </Any>
      <None>
        <!-- otherwise make each RGB val darker -->
        <With Path="Color/@*">
          <Copy From=".*0.5" />
        </With>
      </None>
    </If>
  </With>
</Patch>